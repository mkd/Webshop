<!--
   - list.html
   -
   - TODO: document me!
   -
-->
{% extends "base.html" %}

{% block main_content %}

	<script>
	function add(id){
		$.post('/cart/add', { product: id },
		 function(data) {
			$('#products-in-cart').html(data);
			$("#my-cart").hide();
			$("#my-cart").fadeIn();
		});
	}
	</script>
	
	<h2>{{ message }}</h2>
	
	<div id='products'>
		
		{% if icons == 'OK' %}
			<div class="display-options">
				<a href="?l=no"><img src="/static/images/icons.png" /></a><br/><br/>
			</div>
			{% for product in products %}
				<div id='product' onclick="window.location.href='/product/{{ product.id }}'; ">
					<h1 class="product"><a href="/product/{{ product.id }}/">{{ product.short_name }}</a></h1>
					<div class="product-image">
						<div class="middle"><img src="/static/images/products/{{ product.id }}" width="130" height="130"  /></div>
						<div class="price">{{ product.price }} &euro;</div>
					</div>
					<p>
					<!-- This is awful, I know, but I can do in range(product.average_rating) -->	
					{% if product.average_rating == 0 %}
						<center><img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> </center>
					{% endif %}	
					{% if product.average_rating == 1 %}
						<center><img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> </center>
					{% endif %}
					{% if product.average_rating == 2 %}
						<center><img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> </center>
					{% endif %}
					{% if product.average_rating == 3 %}
						<center><img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /></center>
					{% endif %}
					{% if product.average_rating == 4 %}
						<center><img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> </center>
					{% endif %}
					{% if product.average_rating == 5 %}
						<center><img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> </center>
					{% endif %}
					</p>
				</div>
			{% endfor %}
		
		{% else %}
		
		<div class="display-options">
			<a href="?l=icons"><img src="/static/images/list.png" /></a><br/><br/>
		</div>
		
		<center>
		<table border="0" cellpadding="2" cellspacing="0" width="100%">
		{% for product in products %}
			<tr>
				<td rowspan="2" class="product">
					<a href="/product/{{ product.id }}/"> <img src="/static/images/products/{{ product.id }}" width="70" height="70" border="0" /></a>
				</td>
				<td class="product" with="470">
					<div class="title"><a href="/product/{{ product.id }}/">{{ product.name }}</a></div>
					{{ product.description }}
				</td>
				<td class="product" >
					<div class="price-list"  onclick="add({{product.id}});">{{ product.price }} &euro;</div>
				</td>
			
			<tr height="30">
				<td colspan="2">
				<!-- This is awful, I know, but I can do in range(product.average_rating) -->	
				{% if product.average_rating == 0 %}
					<img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> 
				{% endif %}	
				{% if product.average_rating == 1 %}
					<img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> 
				{% endif %}
				{% if product.average_rating == 2 %}
					<img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" />
				{% endif %}
				{% if product.average_rating == 3 %}
					<img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" /> <img src="/static/images/heart-pic-no.png" />
				{% endif %}
				{% if product.average_rating == 4 %}
					<img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic-no.png" />
				{% endif %}
				{% if product.average_rating == 5 %}
					<img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" /> <img src="/static/images/heart-pic.png" />
				{% endif %}
				
				&nbsp; &nbsp;&nbsp;<img src="/static/images/comments.png" width="18" height="18"/> {{ product.comment_count }} comments
				
				</td>
					
			
			</tr>
		{% endfor %}
		</table>
		</center>
		{% endif %}
	</div>
{% endblock %}
